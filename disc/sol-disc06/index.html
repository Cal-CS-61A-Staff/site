
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content ="CS 61A: Structure and Interpretation of Computer Programs" />
    <meta name="keywords" content ="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS" />
    <meta name="author" content ="Satish Rao" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/assets/js/hl.js"></script>
    <script src="/assets/js/toggledarkmode.js"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="/assets/js/dark-mode.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/mono-blue.css">
    <link rel="icon" href="/assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="/assets/css/disc.css">


    <title>
Discussion 6 | CS 61A Fall 2023
</title>
  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="/assets/images/logo.png"/>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Calendar
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="/weekly">Weekly Schedule</a></li>
                <li><a href="/office-hours">Office Hours</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Links
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://sections.cs61a.org">Sections Tool</a></li>
                <li><a href="https://oh.cs61a.org">Office Hours Queue</a></li>
                <li><a href="https://go.cs61a.org/regrades">Request a Regrade</a></li>
                <li><a href="https://go.cs61a.org/zoom-lecture">Rao Zoom Lecture</a></li>
                <li><a href="https://berkeley.zoom.us/j/98407898918">DeNero Zoom Lecture</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="/instructor">Instructors</a></li>
                <li><a href="/TAs">Rao TAs</a></li>
                <li><a href="/TAs2">DeNero TAs</a></li>
                <li><a href="/tutors">Rao Tutors</a></li>
                <li><a href="/tutors2">DeNero Tutors</a></li>
                <li><a href="/academic-interns">Rao Academic Interns</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://go.cs61a.org/extensions">Request an Extension</a></li>
                <li><a href="https://go.cs61a.org/regrades">Request a Regrade</a></li>
                <li><a href="/articles/accommodations">Book an Accommodations Appointment</a></li>
                <li><a href="/resources/">Topical Resources + Past Exams</a></li>
                <li><a href="https://tutor.cs61a.org/">PythonTutor</a></li>
                <li><a href="https://code.cs61a.org/">Code</a></li>
                <li><a href="https://edstem.org/us/courses/42930/discussion/" target="_blank">Ed</a></li>
                <li><a href="/articles/campus-res/">Department/Campus Resources</a></li>
              </ul>
            </li>
            <li><a href="/articles/about">Syllabus</a></li>
            <li><a href="/denero.html">DeNero</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Rao
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="/">Rao Site</a></li>
                <li><a href="https://go.cs61a.org/zoom-lecture">Rao Zoom Lecture</a></li>
              </ul>
            </li>
            <li><a href="/contact/">Contact</a></li>
            <li>
              <label class="switch">
                <input type="checkbox" id="toggle-mode-cb">
                <span class="slider round"></span>
              </label>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class='row'>
  <div class='col-md-9'>
    <header>
      <h1>
        
Rao Discussion 6: Iterators, Generators

        
        
        <ul class="inline-block list-inline">
          <li><a href="disc06.pdf" class="label label-outline">disc06.pdf</a></li>
        </ul>
        
        
      </h1>
    </header>
    

<div class="alert storable-login-status"></div>

<p>This discussion worksheet is for the Rao offering of CS 61A.
Your work is not graded and you do not need to submit anything.</p>


    
<div class="sol-highlight">


<h2 id="walkthrough-videos">Walkthrough Videos</h2>


<p>Feel free to try these problems on the worksheet in discussion or on
your own, and then come back to reference these walkthrough videos
as you study.</p>

<blockquote><p>To see these videos, you should be logged into your berkeley.edu email.</p></blockquote>


            <iframe width="560" height="315" src="https://youtube.com/embed/videoseries?list=PLx38hZJ5RLZcTiYYRR_hpo_CF4iCevgmn"
                frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe><p><a href='https://youtu.be/playlist?list=PLx38hZJ5RLZcTiYYRR_hpo_CF4iCevgmn'> YouTube link </a></p>
</div>




<h1 id="iterators">Iterators</h1>


<p>An iterable is an object whose elements we can go through one at a time.
Iterables can be used in for loops and list comprehensions. Iterables can
also be converted into lists using the <code>list</code> function.
Examples of iterables we have seen so far in Python include strings,
lists, tuples, and ranges.</p>

<pre><code>&gt;&gt;&gt; for x in &quot;cat&quot;:
...     print(x)
c
a
t
&gt;&gt;&gt; [x*2 for x in (1, 2, 3)]
[2, 4, 6]
&gt;&gt;&gt; list(range(4))
[0, 1, 2, 3]</code></pre>

<p>Note the abstraction present here: given some iterable object, we have a
set of defined actions that we can take with it.
In this discussion, we will peak below the abstraction barrier and examine how
iterables are implemented "under the hood".</p>

<p>In Python, <strong>iterables</strong> are formally implemented as objects that can be passed into the built-in <code>iter</code>
function to produce an <em>iterator</em>. An <strong>iterator</strong> is another type of object
that can produce elements one at a time with the <code>next</code> function.</p>

<ul>
  <li><code>iter(iterable)</code>: Returns an iterator over the elements of the given iterable.</li>
  <li><code>next(iterator)</code>: Returns the next element in an iterator, or raises a <code>StopIteration</code>
  exception if there are no elements left.</li>
</ul>

<p>For example, a list of numbers is an iterable,
since <code>iter</code> gives us an iterator over the given sequence, which
we can navigate using the <code>next</code> function:</p>

<pre><code>&gt;&gt;&gt; lst = [1, 2, 3]
&gt;&gt;&gt; lst_iter = iter(lst)
&gt;&gt;&gt; lst_iter
&lt;list_iterator object ...&gt;
&gt;&gt;&gt; next(lst)
1
&gt;&gt;&gt; next(lst)
2
&gt;&gt;&gt; next(lst)
3
&gt;&gt;&gt; next(lst)
StopIteration</code></pre>

<p>Iterators are very simple. There is only a mechanism to get the next element
in the iterator: <code>next</code>. There is no way to index into an iterator
and there is no way to go backward. Once an iterator has produced an element,
there is no way for us to get that element again unless we store it.</p>

<p>Note that iterators themselves are iterables: calling <code>iter</code> on an iterator
simply returns the same iterator object.</p>

<p>For example, we can see what happens when we use <code>iter</code> and <code>next</code> with a list:</p>

<pre><code>&gt;&gt;&gt; lst = [1, 2, 3]
&gt;&gt;&gt; next(lst)             # Calling next on an iterable
TypeError: &#x27;list&#x27; object is not an iterator
&gt;&gt;&gt; list_iter = iter(lst) # Creates an iterator for the list
&gt;&gt;&gt; next(list_iter)       # Calling next on an iterator
1
&gt;&gt;&gt; next(iter(list_iter)) # Calling iter on an iterator returns itself
2
&gt;&gt;&gt; for e in list_iter:   # Exhausts remainder of list_iter
...     print(e)
3
&gt;&gt;&gt; next(list_iter)       # No elements left!
StopIteration
&gt;&gt;&gt; lst                   # Original iterable is unaffected
[1, 2, 3]</code></pre>

<p>The <code>map</code> and <code>filter</code> functions we learned earlier in class return iterator objects.
<div class="page-break"></div></p>


<h3 id="q1-wwpd-iterators">Q1: WWPD: Iterators</h3>


<p>What would Python display?</p>

<pre><code>&gt;&gt;&gt; s = &quot;cs61a&quot;
&gt;&gt;&gt; s_iter = iter(s)
&gt;&gt;&gt; next(s_iter)</code></pre>



            <label class="sr-only" for="iter-wwpd-1-input">Your Answer:</label>
            <input class="form-control storable" id="iter-wwpd-1-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> 'c' </div>

<pre><code>&gt;&gt;&gt; next(s_iter)</code></pre>



            <label class="sr-only" for="iter-wwpd-2-input">Your Answer:</label>
            <input class="form-control storable" id="iter-wwpd-2-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> 's' </div>

<pre><code>&gt;&gt;&gt; list(s_iter)</code></pre>



            <label class="sr-only" for="iter-wwpd-3-input">Your Answer:</label>
            <input class="form-control storable" id="iter-wwpd-3-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> [‘6’, ‘1’, ‘a’] </div>

<pre><code>&gt;&gt;&gt; s = [[1, 2, 3, 4]]
&gt;&gt;&gt; i = iter(s)
&gt;&gt;&gt; j = iter(next(i))
&gt;&gt;&gt; next(j)</code></pre>



            <label class="sr-only" for="iter-wwpd-4-input">Your Answer:</label>
            <input class="form-control storable" id="iter-wwpd-4-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> 1 </div>

<pre><code>&gt;&gt;&gt; s.append(5)
&gt;&gt;&gt; next(i)</code></pre>



            <label class="sr-only" for="iter-wwpd-5-input">Your Answer:</label>
            <input class="form-control storable" id="iter-wwpd-5-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> 5 </div>

<pre><code>&gt;&gt;&gt; next(j)</code></pre>




            <label class="sr-only" for="iter-wwpd-6-input">Your Answer:</label>
            <input class="form-control storable" id="iter-wwpd-6-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> 2 </div>

<pre><code>&gt;&gt;&gt; list(j)</code></pre>




            <label class="sr-only" for="iter-wwpd-7-input">Your Answer:</label>
            <input class="form-control storable" id="iter-wwpd-7-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> [3, 4] </div>

<pre><code>&gt;&gt;&gt; next(i)</code></pre>



            <label class="sr-only" for="iter-wwpd-8-input">Your Answer:</label>
            <input class="form-control storable" id="iter-wwpd-8-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> StopIteration </div>

<div class="page-break"></div>


<h1 id="generators">Generators</h1>




<p>We can define custom iterators by writing a <em>generator function</em>,
which returns a special type of iterator called a <strong>generator</strong>.</p>

<p>A generator function looks like a normal Python function, except
that it has at least one <code>yield</code> statement.
When we call a generator function, a <strong><em>generator</em></strong> <em>object</em>
is returned without evaluating the body of the generator function itself.
(Note that this is different from ordinary Python functions.
While generator functions and normal functions look the same,
their evaluation rules are very different!)</p>

<p>When we first call <code>next</code> on the returned generator,
we will begin evaluating the body of the generator function until
an element is yielded or the function otherwise stops
(such as if we <code>return</code>).
The generator remembers where we stopped,
and will continue evaluating from that stopping point
on the next time we call <code>next</code>.</p>

<p>As with other iterators, if there are no more elements to be generated,
then calling <code>next</code> on the generator will give us a <code>StopIteration</code>.</p>

<p>For example, here's a generator function:</p>

<pre><code>def countdown(n):
    print(&quot;Beginning countdown!&quot;)
    while n &gt;= 0:
        yield n
        n &#x2d;= 1
    print(&quot;Blastoff!&quot;)</code></pre>

<p>To create a new generator object, we can call the generator function.
Each returned generator object from a function call will separately
keep track of where it is in terms of evaluating the body of the function.
Like all other iterators, calling <code>iter</code> on an existing generator object
returns the same generator object.</p>

<pre><code>&gt;&gt;&gt; c1, c2 = countdown(2), countdown(2)
&gt;&gt;&gt; c1 is iter(c1)  # a generator is an iterator
True
&gt;&gt;&gt; c1 is c2
False
&gt;&gt;&gt; next(c1)
Beginning countdown!
2
&gt;&gt;&gt; next(c2)
Beginning countdown!
2</code></pre>

<div class="page-break"></div>

<p>In a generator function, we can also have a <code>yield from</code> statement,
which will <strong>yield</strong> each element <strong>from</strong> an iterator or iterable.</p>

<pre><code>&gt;&gt;&gt; def gen_list(lst):
...     yield from lst
...
&gt;&gt;&gt; g = gen_list([1, 2])
&gt;&gt;&gt; next(g)
1
&gt;&gt;&gt; next(g)
2
&gt;&gt;&gt; next(g)
StopIteration</code></pre>

<p>Since generators are themselves iterators, this means we can use <code>yield from</code>
to create recursive generators!</p>

<pre><code>&gt;&gt;&gt; def rec_countdown(n):
...     if n &lt; 0:
...         print(&quot;Blastoff!)
...     else:
...         yield n
...         yield from rec_countdown(n&#x2d;1)
...
&gt;&gt;&gt; r = rec_countdown(2)
&gt;&gt;&gt; next(r)
2
&gt;&gt;&gt; next(r)
1
&gt;&gt;&gt; next(r)
0
&gt;&gt;&gt; next(r)
Blastoff!
StopIteration</code></pre>

<div class="page-break"></div>


<h3 id="q2-wwpd-generators">Q2: WWPD: Generators</h3>


<p>What would Python display? If the command errors, input the specific error.</p>

<pre><code>&gt;&gt;&gt; def infinite_generator(n):
...     yield n
...     while True:
...     	n += 1
...     	yield n
&gt;&gt;&gt; next(infinite_generator)</code></pre>



            <label class="sr-only" for="generators-wwpd-1-input">Your Answer:</label>
            <input class="form-control storable" id="generators-wwpd-1-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> TypeError </div>

<pre><code>&gt;&gt;&gt; gen_obj = infinite_generator(1)
&gt;&gt;&gt; next(gen_obj)</code></pre>



            <label class="sr-only" for="generators-wwpd-2-input">Your Answer:</label>
            <input class="form-control storable" id="generators-wwpd-2-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> 1 </div>

<pre><code>&gt;&gt;&gt; next(gen_obj)</code></pre>



            <label class="sr-only" for="generators-wwpd-3-input">Your Answer:</label>
            <input class="form-control storable" id="generators-wwpd-3-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> 2 </div>

<pre><code>&gt;&gt;&gt; list(gen_obj)</code></pre>



            <label class="sr-only" for="generators-wwpd-4-input">Your Answer:</label>
            <input class="form-control storable" id="generators-wwpd-4-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> Infinite Loop </div>

<pre><code>&gt;&gt;&gt; def rev_str(s):
...     for i in range(len(s)):
...         yield from s[i::&#x2d;1]
&gt;&gt;&gt; hey = rev_str(&quot;hey&quot;)
&gt;&gt;&gt; next(hey)</code></pre>



            <label class="sr-only" for="generators-wwpd-5-input">Your Answer:</label>
            <input class="form-control storable" id="generators-wwpd-5-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> 'h' </div>

<pre><code>&gt;&gt;&gt; next(hey)</code></pre>



            <label class="sr-only" for="generators-wwpd-6-input">Your Answer:</label>
            <input class="form-control storable" id="generators-wwpd-6-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> 'e' </div>

<pre><code>&gt;&gt;&gt; next(hey)</code></pre>



            <label class="sr-only" for="generators-wwpd-7-input">Your Answer:</label>
            <input class="form-control storable" id="generators-wwpd-7-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> 'h' </div>

<pre><code>&gt;&gt;&gt; list(hey)</code></pre>



            <label class="sr-only" for="generators-wwpd-7-input">Your Answer:</label>
            <input class="form-control storable" id="generators-wwpd-7-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> ['y', 'e', 'h'] </div>

<pre><code>&gt;&gt;&gt; def add_prefix(s, pre):
...     if not pre:
...         return
...     yield pre[0] + s
...     yield from add_prefix(s, pre[1:])
&gt;&gt;&gt; school = add_prefix(&quot;schooler&quot;, [&quot;pre&quot;, &quot;middle&quot;, &quot;high&quot;])
&gt;&gt;&gt; next(school)</code></pre>



            <label class="sr-only" for="generators-wwpd-8-input">Your Answer:</label>
            <input class="form-control storable" id="generators-wwpd-8-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> 'preschooler' </div>

<pre><code>&gt;&gt;&gt; list(map(lambda x: x[:&#x2d;2], school))</code></pre>



            <label class="sr-only" for="generators-wwpd-9-input">Your Answer:</label>
            <input class="form-control storable" id="generators-wwpd-9-input" type="text">
            <div class="storable-status"></div>
        
<div class="sol-highlight"> ['middleschool', 'highschool'] </div>

<div class="page-break"></div>


<h3 id="q3-filter-iter">Q3: Filter-Iter</h3>

<p>Implement a generator function called <code>filter_iter(iterable, f)</code> that only yields
elements of <code>iterable</code> for which <code>f</code> returns <code>True</code>.</p>

<blockquote><p>Remember, <code>iterable</code> could be infinite!</p></blockquote>


            
            <b>Your Answer</b>
            
            <div class="monaco-storable" id="filter-iter-input" style="height:468px;"></div>
            <a href="javascript:void" id="modal-link-filter-iter-input">Run in 61A Code</a>
            <div class="modal fade" id="modal-filter-iter-input" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content" style="padding-bottom: -5px">
                    <iframe
                        id="code-iframe-filter-iter-input"
                        width="100%"
                        height="700px"
                        style="border: none; display:block;"
                    ></iframe>
                    </div>
                </div>
            </div>
            <div class="storable-status"></div>
            <script>
                $(() => activateEditor('def filter_iter(iterable, f):\n    &quot;&quot;&quot;\n    Generates elements of iterable for which f returns True.\n    &gt;&gt;&gt; is_even = lambda x: x % 2 == 0\n    &gt;&gt;&gt; list(filter_iter(range(5), is_even)) # a list of the values yielded from the call to filter_iter\n    [0, 2, 4]\n    &gt;&gt;&gt; all_odd = (2*y&#x2d;1 for y in range(5))\n    &gt;&gt;&gt; list(filter_iter(all_odd, is_even))\n    []\n    &gt;&gt;&gt; naturals = (n for n in range(1, 100))\n    &gt;&gt;&gt; s = filter_iter(naturals, is_even)\n    &gt;&gt;&gt; next(s)\n    2\n    &gt;&gt;&gt; next(s)\n    4\n    &quot;&quot;&quot;\n    "*** YOUR CODE HERE ***"\n\n', "python", "filter-iter-input"));
            </script>
        
            <div class="sol-highlight">
                <b>Solution</b>
                
<pre><code>def filter_iter(iterable, f):
    &quot;&quot;&quot;
    Generates elements of iterable for which f returns True.
    &gt;&gt;&gt; is_even = lambda x: x % 2 == 0
    &gt;&gt;&gt; list(filter_iter(range(5), is_even)) # a list of the values yielded from the call to filter_iter
    [0, 2, 4]
    &gt;&gt;&gt; all_odd = (2*y&#x2d;1 for y in range(5))
    &gt;&gt;&gt; list(filter_iter(all_odd, is_even))
    []
    &gt;&gt;&gt; naturals = (n for n in range(1, 100))
    &gt;&gt;&gt; s = filter_iter(naturals, is_even)
    &gt;&gt;&gt; next(s)
    2
    &gt;&gt;&gt; next(s)
    4
    &quot;&quot;&quot;
    for elem in iterable:
        if f(elem):
            yield elem

# Alternate solution (only works if iterable is not an infinite iterator)
def filter_iter(iterable, f):
    yield from [elem for elem in iterable if f(elem)]
</code></pre>

            </div>
        



<div class="page-break"></div>


<h3 id="q4-what-s-the-difference">Q4: What's the Difference?</h3>


<p>Implement <code>differences</code>, a generator function that takes an iterable <code>it</code> whose elements are numbers. 
<code>differences</code> should produce a generator that yield the differences between successive terms of <code>it</code>. 
If <code>it</code> has less than 2 values, <code>differences</code> should yield nothing.</p>


            
            <b>Your Answer</b>
            
            <div class="monaco-storable" id="differences-input" style="height:324px;"></div>
            <a href="javascript:void" id="modal-link-differences-input">Run in 61A Code</a>
            <div class="modal fade" id="modal-differences-input" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content" style="padding-bottom: -5px">
                    <iframe
                        id="code-iframe-differences-input"
                        width="100%"
                        height="700px"
                        style="border: none; display:block;"
                    ></iframe>
                    </div>
                </div>
            </div>
            <div class="storable-status"></div>
            <script>
                $(() => activateEditor('def differences(it):\n    &quot;&quot;&quot; \n    Yields the differences between successive terms of iterable it.\n\n    &gt;&gt;&gt; d = differences(iter([5, 2, &#x2d;100, 103]))\n    &gt;&gt;&gt; [next(d) for _ in range(3)]\n    [&#x2d;3, &#x2d;102, 203]\n    &gt;&gt;&gt; list(differences([1]))\n    []\n    &quot;&quot;&quot;\n    "*** YOUR CODE HERE ***"\n\n', "python", "differences-input"));
            </script>
        
            <div class="sol-highlight">
                <b>Solution</b>
                
<pre><code>def differences(it):
    &quot;&quot;&quot; 
    Yields the differences between successive terms of iterable it.

    &gt;&gt;&gt; d = differences(iter([5, 2, &#x2d;100, 103]))
    &gt;&gt;&gt; [next(d) for _ in range(3)]
    [&#x2d;3, &#x2d;102, 203]
    &gt;&gt;&gt; list(differences([1]))
    []
    &quot;&quot;&quot;
    iterator = iter(it)
    prev_term = next(iterator)
    for term in iterator: 
        yield term &#x2d; prev_term
        prev_term = term
</code></pre>

            </div>
        

<div class="page-break"></div>


<h3 id="q5-primes-generator">Q5: Primes Generator</h3>


<p>Write a function <code>primes_gen</code> that takes a single argument <code>n</code> and yields all prime
numbers less than or equal to <code>n</code> in decreasing order. Assume <code>n &gt;= 1</code>.
You may use the <code>is_prime</code> function included below, which we implemented in
<a href="/disc/disc03/">Discussion 3</a>.</p>

<p>First approach this problem using a <code>for</code> loop and using <code>yield</code>.</p>


            
            <b>Your Answer</b>
            
            <div class="monaco-storable" id="primes_yield-input" style="height:522px;"></div>
            <a href="javascript:void" id="modal-link-primes_yield-input">Run in 61A Code</a>
            <div class="modal fade" id="modal-primes_yield-input" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content" style="padding-bottom: -5px">
                    <iframe
                        id="code-iframe-primes_yield-input"
                        width="100%"
                        height="700px"
                        style="border: none; display:block;"
                    ></iframe>
                    </div>
                </div>
            </div>
            <div class="storable-status"></div>
            <script>
                $(() => activateEditor('def is_prime(n):\n    &quot;&quot;&quot;Returns True if n is a prime number and False otherwise.\n    &gt;&gt;&gt; is_prime(2)\n    True\n    &gt;&gt;&gt; is_prime(16)\n    False\n    &gt;&gt;&gt; is_prime(521)\n    True\n    &quot;&quot;&quot;\n    def helper(i):\n        if i &gt; (n ** 0.5): # Could replace with i == n\n            return True\n        elif n % i == 0:\n            return False\n        return helper(i + 1)\n    return helper(2)\n\ndef primes_gen(n):\n    &quot;&quot;&quot;Generates primes in decreasing order.\n    &gt;&gt;&gt; pg = primes_gen(7)\n    &gt;&gt;&gt; list(pg)\n    [7, 5, 3, 2]\n    &quot;&quot;&quot;\n    "*** YOUR CODE HERE ***"\n\n', "python", "primes_yield-input"));
            </script>
        
            <div class="sol-highlight">
                <b>Solution</b>
                
<pre><code>def is_prime(n):
    &quot;&quot;&quot;Returns True if n is a prime number and False otherwise.
    &gt;&gt;&gt; is_prime(2)
    True
    &gt;&gt;&gt; is_prime(16)
    False
    &gt;&gt;&gt; is_prime(521)
    True
    &quot;&quot;&quot;
    def helper(i):
        if i &gt; (n ** 0.5): # Could replace with i == n
            return True
        elif n % i == 0:
            return False
        return helper(i + 1)
    return helper(2)

def primes_gen(n):
    &quot;&quot;&quot;Generates primes in decreasing order.
    &gt;&gt;&gt; pg = primes_gen(7)
    &gt;&gt;&gt; list(pg)
    [7, 5, 3, 2]
    &quot;&quot;&quot;
    for num in range(n, 1, &#x2d;1):
        if is_prime(num):
            yield num
</code></pre>

            </div>
        

<div class="page-break"></div>

<p>Now that you've done it using a <code>for</code> loop and <code>yield</code>, try using <code>yield from</code>!</p>

<p>Optional Challenge:
Now rewrite the generator so that it also prints the primes in
<em>ascending order</em>.</p>


            
            <b>Your Answer</b>
            
            <div class="monaco-storable" id="primes_yield_from-input" style="height:558px;"></div>
            <a href="javascript:void" id="modal-link-primes_yield_from-input">Run in 61A Code</a>
            <div class="modal fade" id="modal-primes_yield_from-input" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content" style="padding-bottom: -5px">
                    <iframe
                        id="code-iframe-primes_yield_from-input"
                        width="100%"
                        height="700px"
                        style="border: none; display:block;"
                    ></iframe>
                    </div>
                </div>
            </div>
            <div class="storable-status"></div>
            <script>
                $(() => activateEditor('def is_prime(n):\n    &quot;&quot;&quot;Returns True if n is a prime number and False otherwise.\n    &gt;&gt;&gt; is_prime(2)\n    True\n    &gt;&gt;&gt; is_prime(16)\n    False\n    &gt;&gt;&gt; is_prime(521)\n    True\n    &quot;&quot;&quot;\n    def helper(i):\n        if i &gt; (n ** 0.5): # Could replace with i == n\n            return True\n        elif n % i == 0:\n            return False\n        return helper(i + 1)\n    return helper(2)\n\ndef primes_gen(n):\n    &quot;&quot;&quot;Generates primes in decreasing order.\n    &gt;&gt;&gt; pg = primes_gen(7)\n    &gt;&gt;&gt; list(pg)\n    [7, 5, 3, 2]\n    &quot;&quot;&quot;\n    if __________________________________:\n        return\n    if __________________________________:\n        yield __________________________________\n    yield from __________________________________\n\n', "python", "primes_yield_from-input"));
            </script>
        
            <div class="sol-highlight">
                <b>Solution</b>
                
<pre><code>def is_prime(n):
    &quot;&quot;&quot;Returns True if n is a prime number and False otherwise.
    &gt;&gt;&gt; is_prime(2)
    True
    &gt;&gt;&gt; is_prime(16)
    False
    &gt;&gt;&gt; is_prime(521)
    True
    &quot;&quot;&quot;
    def helper(i):
        if i &gt; (n ** 0.5): # Could replace with i == n
            return True
        elif n % i == 0:
            return False
        return helper(i + 1)
    return helper(2)

def primes_gen(n):
    &quot;&quot;&quot;Generates primes in decreasing order.
    &gt;&gt;&gt; pg = primes_gen(7)
    &gt;&gt;&gt; list(pg)
    [7, 5, 3, 2]
    &quot;&quot;&quot;
    if n == 1:
        return
    if is_prime(n):
        yield n
    yield from primes_gen(n&#x2d;1)
</code></pre>

            </div>
        

</p>

<div class="page-break"></div>


<h3 id="q6-stair-ways">Q6: Stair Ways</h3>


<p>In <a href="/disc/disc04/#q1-count-stair-ways">discussion 4</a>, we considered how many different ways there are to climb a flight of stairs with <code>n</code> steps if you are able to take 1 or 2 steps at a time. In this problem, you will write a generator function <code>stair_ways</code> that yields all the different ways you can climb such a staircase.</p>

<p>Each "way" of climbing a staircase is represented by a list of <code>1</code>s and <code>2</code>s, representing the sequence of step sizes a person should take to climb the flight.</p>

<p>For example, for a flight with 3 steps, there are three ways to climb it:</p>

<ul>
  <li>You can take one step each time: <code>[1, 1, 1]</code>.</li>
  <li>You can take two steps then one step: <code>[2, 1]</code>.</li>
  <li>You can take one step then two steps: <code>[1, 2].</code>.</li>
</ul>

<p>Therefore, <code>stair_ways(3)</code> should yield <code>[1, 1, 1]</code>, <code>[2, 1]</code>, and <code>[1, 2]</code> in any order.</p>


            
            <b>Your Answer</b>
            
            <div class="monaco-storable" id="stair_ways-input" style="height:450px;"></div>
            <a href="javascript:void" id="modal-link-stair_ways-input">Run in 61A Code</a>
            <div class="modal fade" id="modal-stair_ways-input" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content" style="padding-bottom: -5px">
                    <iframe
                        id="code-iframe-stair_ways-input"
                        width="100%"
                        height="700px"
                        style="border: none; display:block;"
                    ></iframe>
                    </div>
                </div>
            </div>
            <div class="storable-status"></div>
            <script>
                $(() => activateEditor('def stair_ways(n):\n    &quot;&quot;&quot;\n    Yields all ways to climb a set of N stairs taking\n    1 or 2 steps at a time.\n\n    &gt;&gt;&gt; list(stair_ways(0))\n    [[]]\n    &gt;&gt;&gt; s_w = stair_ways(4)\n    &gt;&gt;&gt; sorted([next(s_w) for _ in range(5)])\n    [[1, 1, 1, 1], [1, 1, 2], [1, 2, 1], [2, 1, 1], [2, 2]]\n    &gt;&gt;&gt; list(s_w) # Ensure you&#x27;re not yielding extra\n    []\n    &quot;&quot;&quot;\n    "*** YOUR CODE HERE ***"\n\n', "python", "stair_ways-input"));
            </script>
        
            <div class="sol-highlight">
                <b>Solution</b>
                
<pre><code>def stair_ways(n):
    &quot;&quot;&quot;
    Yields all ways to climb a set of N stairs taking
    1 or 2 steps at a time.

    &gt;&gt;&gt; list(stair_ways(0))
    [[]]
    &gt;&gt;&gt; s_w = stair_ways(4)
    &gt;&gt;&gt; sorted([next(s_w) for _ in range(5)])
    [[1, 1, 1, 1], [1, 1, 2], [1, 2, 1], [2, 1, 1], [2, 2]]
    &gt;&gt;&gt; list(s_w) # Ensure you&#x27;re not yielding extra
    []
    &quot;&quot;&quot;
    if n == 0:
        yield []
    elif n == 1:
        yield [1]
    else:
        for way in stair_ways(n &#x2d; 1):
            yield [1] + way
        for way in stair_ways(n &#x2d; 2):
            yield [2] + way
</code></pre>

            </div>
        


<script>
    $('.alwaystoggle').css('display', 'inline-block');
    $('.alwaystoggle').click(function() {
      var solution_id = $(this).attr('id');
      $('div.' + solution_id).slideToggle(600);
    });
</script>

  </div>

  <div class='col-md-3 sticky'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="#walkthrough-videos">Walkthrough Videos</a></li>
  <li><a href="#iterators">Iterators</a></li>
  <ul>
    <li><a href="#q1-wwpd-iterators">Q1: WWPD: Iterators</a></li>
  </ul>
  <li><a href="#generators">Generators</a></li>
  <ul>
    <li><a href="#q2-wwpd-generators">Q2: WWPD: Generators</a></li>
    <li><a href="#q3-filter-iter">Q3: Filter-Iter</a></li>
    <li><a href="#q4-what-s-the-difference">Q4: What's the Difference?</a></li>
    <li><a href="#q5-primes-generator">Q5: Primes Generator</a></li>
    <li><a href="#q6-stair-ways">Q6: Stair Ways</a></li>
  </ul>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/weekly">Weekly Schedule</a></li>
            <li><a href="/office-hours">Office Hours</a></li>
            <li><a href="/staff">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="/resources">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/articles/studying">Studying Guide</a></li>
            <li><a href="/articles/debugging">Debugging Guide</a></li>
            <li><a href="/articles/composition">Composition Guide</a></li>
            <li><a href="/articles/pair-programming">Pair Programming</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="/articles/about">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/articles/about#assignments">Assignments</a></li>
            <li><a href="/articles/about#exams">Exams</a></li>
            <li><a href="/articles/about#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/loader.min.js"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/editor/editor.main.min.css">
  <script>
      require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs' }});
      window.MonacoEnvironment = { getWorkerUrl: () => URL.createObjectURL(new Blob([`
      self.MonacoEnvironment = {
          baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min'
      };
      importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/base/worker/workerMain.min.js');
  `], { type: 'text/javascript' }))
  };
  </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsPlumb/2.15.5/js/jsplumb.min.js"></script>
    <script src="/assets/js/network_storage.js"></script>
    <script src="/assets/js/storable.js"></script>
    <script src="/assets/js/editor.js"></script>
    <script src="/assets/js/copy-button.js"></script>
    <script src="/assets/js/env-diagram.js"></script>
    
<script src="/assets/js/sketchy.js"></script>
<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  </body>
</html>