
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content ="CS 61A: Structure and Interpretation of Computer Programs" />
    <meta name="keywords" content ="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS" />
    <meta name="author" content ="Satish Rao" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/assets/js/hl.js"></script>
    <script src="/assets/js/toggledarkmode.js"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="/assets/js/dark-mode.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/mono-blue.css">
    <link rel="icon" href="/assets/images/favicon.ico">

    

    <title>
Lab 5: Trees, Data Abstraction | CS 61A Fall 2023
</title>
  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="/assets/images/logo.png"/>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Calendar
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="/weekly">Weekly Schedule</a></li>
                <li><a href="/office-hours">Office Hours</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Links
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://sections.cs61a.org">Sections Tool</a></li>
                <li><a href="https://oh.cs61a.org">Office Hours Queue</a></li>
                <li><a href="https://go.cs61a.org/regrades">Request a Regrade</a></li>
                <li><a href="https://go.cs61a.org/zoom-lecture">Rao Zoom Lecture</a></li>
                <li><a href="https://berkeley.zoom.us/j/98407898918">DeNero Zoom Lecture</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="/instructor">Instructors</a></li>
                <li><a href="/TAs">Rao TAs</a></li>
                <li><a href="/TAs2">DeNero TAs</a></li>
                <li><a href="/tutors">Rao Tutors</a></li>
                <li><a href="/tutors2">DeNero Tutors</a></li>
                <li><a href="/academic-interns">Rao Academic Interns</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://go.cs61a.org/extensions">Request an Extension</a></li>
                <li><a href="https://go.cs61a.org/regrades">Request a Regrade</a></li>
                <li><a href="/articles/accommodations">Book an Accommodations Appointment</a></li>
                <li><a href="/resources/">Topical Resources + Past Exams</a></li>
                <li><a href="https://tutor.cs61a.org/">PythonTutor</a></li>
                <li><a href="https://code.cs61a.org/">Code</a></li>
                <li><a href="https://edstem.org/us/courses/42930/discussion/" target="_blank">Ed</a></li>
                <li><a href="/articles/campus-res/">Department/Campus Resources</a></li>
              </ul>
            </li>
            <li><a href="/articles/about">Syllabus</a></li>
            <li><a href="/denero.html">DeNero</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Rao
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="/">Rao Site</a></li>
                <li><a href="https://go.cs61a.org/zoom-lecture">Rao Zoom Lecture</a></li>
              </ul>
            </li>
            <li><a href="/contact/">Contact</a></li>
            <li>
              <label class="switch">
                <input type="checkbox" id="toggle-mode-cb">
                <span class="slider round"></span>
              </label>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class='row'>
  <div class='col-md-9'>
    <header>
      <h1>
        
Lab 5: Trees, Data Abstraction

        
        
        <ul class="inline-block list-inline">
          <li><a href="lab05.zip" class="label label-outline">lab05.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    

<p><i>Due by 11:59pm on Wednesday, September 27.</i></p>






<h2 id='starter-files'>Starter Files</h2>

<p>Download <a href="lab05.zip">lab05.zip</a>.
Inside the archive, you will find starter files for the questions in this lab,
  along with a copy of the <a href="ok">Ok</a> autograder.</p>








    
<h1 id="required-questions">Required Questions</h1>


<br>

        <button id='toggle-1' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Getting Started Videos<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">

<h2 id="getting-started-videos">Getting Started Videos</h2>


<p>These videos may provide some helpful direction for tackling the coding
problems on this assignment.</p>

<blockquote><p>To see these videos, you should be logged into your berkeley.edu email.</p></blockquote>


            <iframe width="560" height="315" src="https://youtube.com/embed/videoseries?list=PLx38hZJ5RLZelR3ISP8iv5mUxDYLcOTRB"
                frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe><p><a href='https://youtu.be/playlist?list=PLx38hZJ5RLZelR3ISP8iv5mUxDYLcOTRB'> YouTube link </a></p>
</div>


<h2 id="dictionaries">Dictionaries</h2>


<p>Consult the drop-down if you need a refresher on dictionaries. It's
okay to skip directly to the questions and refer back
here should you get stuck.</p>


        <button id='toggle-2' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Dictionaries<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-2">

<p>Lists are ordered collections that allow us to access values by index. Another
type of collection, called a <strong>dictionary</strong>, allows us to store and access
values that correspond to given <em>keys</em>.</p>

<p>For example, the following code constructs a dictionary with three entries
and assigns it to the name <code>artists</code>. Note that you could write the same code all
on one line.</p>

<pre><code>&gt;&gt;&gt; artists = {
...    &#x27;Ariana Grande&#x27;: &#x27;No Tears Left To Cry&#x27;,
...    &#x27;Marshmello&#x27;: &#x27;FRIENDS&#x27;,
...    &#x27;Migos&#x27;: [&#x27;Stir Fry&#x27;, &#x27;Walk It Talk It&#x27;]
... }</code></pre>

<p>We say that a dictionary is an unordered collection of key-value pairs.
Each key-value pair is separated by a comma. For each pair, the key appears to
the left of the colon and the value appears to the right of the colon.
To retrieve values from the dictionary, use bracket notation with the
corresponding key:</p>

<pre><code>&gt;&gt;&gt; artists[&#x27;Ariana Grande&#x27;]
&#x27;No Tears Left To Cry&#x27;
&gt;&gt;&gt; songs = artists[&#x27;Migos&#x27;]
&gt;&gt;&gt; songs[0]
&#x27;Stir Fry&#x27;</code></pre>

<p>Keys/values in dictionaries do not all have to be the same
type:</p>

<pre><code>&gt;&gt;&gt; d = {1: &quot;hello&quot;, &quot;hi&quot;: 3, (3, 5): 2}
&gt;&gt;&gt; d[(3,5)]
2</code></pre>

<p>However, keys can only be immutable types (e.g. strings, numbers, tuples).
For example, if a list is used as a key, an error is raised:</p>

<pre><code>&gt;&gt;&gt; d = {[1]: &quot;test&quot;}
TypeError</code></pre>

<p>Of course, keys must be unique in a dictionary.
While Python does not raise an error when you do this,
duplicate keys make it impossible to access parts of your data:</p>

<pre><code>&gt;&gt;&gt; d = {&quot;fun&quot;: 1, &quot;fun&quot;: 2}
&gt;&gt;&gt; d[&quot;fun&quot;] # Is 1 or 2 output?</code></pre>

<!-- You can add an entry or update an entry for an existing key in the dictionary
using the following syntax.

<blockquote><p>Note that the syntax for adding and for updating a key-value pair are identical,
so be careful! You might end updating (and overwriting an old value) even if
you intended to add, and vice versa.</p></blockquote>

<pre><code>&gt;&gt;&gt; artists[&#x27;Marshmello&#x27;] = &#x27;Wolves&#x27;
&gt;&gt;&gt; artists[&#x27;Marshmello&#x27;]
&#x27;Wolves&#x27;
&gt;&gt;&gt; artists[&#x27;Charlie Puth&#x27;] = &#x27;Attention&#x27; # New entry!
&gt;&gt;&gt; artists[&#x27;Charlie Puth&#x27;]
&#x27;Attention&#x27;</code></pre>

-->

<p>You can check whether a dictionary has a key using the <code>in</code> operator,
like we can do with lists.</p>

<pre><code>&gt;&gt;&gt; &#x27;Migos&#x27; in artists
True
&gt;&gt;&gt; &#x27;Wolves&#x27; in artists  # Not True for values!
False</code></pre>

<p>Finally, here are some useful dictionary functions:</p>

<ul>
  <li><p><code>dict.keys()</code> will return a sequence of keys.</p>

<pre><code>&gt;&gt;&gt; list(artists.keys()) # We use list() to turn the sequence into a list
[&#x27;Ariana Grande&#x27;, &#x27;Marshmello&#x27;, &#x27;Migos&#x27;, &#x27;Charlie Puth&#x27;]</code></pre></li>
  <li><p><code>dict.values()</code> will return a sequence of values.</p>

<pre><code>&gt;&gt;&gt; list(artists.values())
[&#x27;No Tears Left To Cry&#x27;, &#x27;Wolves&#x27;, [&#x27;Stir Fry&#x27;, &#x27;Walk It Talk It&#x27;], &#x27;Attention&#x27;]</code></pre></li>
  <li><p><code>dict.items()</code> will return a sequence of key-value tuples.</p>

<pre><code>&gt;&gt;&gt; list(artists.items())
[(&#x27;Ariana Grande&#x27;, &#x27;No Tears Left To Cry&#x27;),
 (&#x27;Marshmello&#x27;, &#x27;Wolves&#x27;),
 (&#x27;Migos&#x27;, [&#x27;Stir Fry&#x27;, &#x27;Walk It Talk It&#x27;]),
 (&#x27;Charlie Puth&#x27;, &#x27;Attention&#x27;)]</code></pre></li>
</ul>

</div>
<br>


<h3 id="q1-dictionaries">Q1: Dictionaries</h3>


<blockquote><p>Use Ok to test your knowledge with the following "What Would Python Display?" questions:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q pokemon -u<button id="copy-code-python3ok-qpokemon-u" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qpokemon-u").onclick = () => copyCode('python3 ok -q pokemon -u', "copy-code-python3ok-qpokemon-u");
        </script>
        <br/></blockquote>

<pre><code>&gt;&gt;&gt; pokemon = {&#x27;pikachu&#x27;: 25, &#x27;dragonair&#x27;: 148, &#x27;mew&#x27;: 151}
&gt;&gt;&gt; pokemon[&#x27;pikachu&#x27;]
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x32;&#x35;</div>
&gt;&gt;&gt; len(pokemon)
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x33;</div>
&gt;&gt;&gt; &#x27;mewtwo&#x27; in pokemon
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x46;&#x61;&#x6c;&#x73;&#x65;</div>
&gt;&gt;&gt; &#x27;pikachu&#x27; in pokemon
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x54;&#x72;&#x75;&#x65;</div>
&gt;&gt;&gt; 25 in pokemon
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x46;&#x61;&#x6c;&#x73;&#x65;</div>
&gt;&gt;&gt; 148 in pokemon.values()
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x54;&#x72;&#x75;&#x65;</div>
&gt;&gt;&gt; 151 in pokemon.keys()
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x46;&#x61;&#x6c;&#x73;&#x65;</div>
&gt;&gt;&gt; &#x27;mew&#x27; in pokemon.keys()
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x54;&#x72;&#x75;&#x65;</div></code></pre>
        <button id='prompt-1' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<!-- <pre><code>&gt;&gt;&gt; letters = {&#x27;a&#x27;: 1, &#x27;b&#x27;: 2, &#x27;c&#x27;: 3}
&gt;&gt;&gt; &#x27;a&#x27; in letters
<div class="alt prompt-2">______</div><div class="solution prompt-2">&#x54;&#x72;&#x75;&#x65;</div>
&gt;&gt;&gt; 2 in letters
<div class="alt prompt-2">______</div><div class="solution prompt-2">&#x46;&#x61;&#x6c;&#x73;&#x65;</div>
&gt;&gt;&gt; sorted(list(letters.keys()))
<div class="alt prompt-2">______</div><div class="solution prompt-2">&#x5b;&#x27;&#x61;&#x27;&#x2c;&#x20;&#x27;&#x62;&#x27;&#x2c;&#x20;&#x27;&#x63;&#x27;&#x5d;</div>
&gt;&gt;&gt; sorted(list(letters.items()))
<div class="alt prompt-2">______</div><div class="solution prompt-2">&#x5b;&#x28;&#x27;&#x61;&#x27;&#x2c;&#x20;&#x31;&#x29;&#x2c;&#x20;&#x28;&#x27;&#x62;&#x27;&#x2c;&#x20;&#x32;&#x29;&#x2c;&#x20;&#x28;&#x27;&#x63;&#x27;&#x2c;&#x20;&#x33;&#x29;&#x5d;</div></code></pre>
        <button id='prompt-2' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
         -->

<!-- Note that the last example demonstrates that dictionaries cannot use
other mutable data structures as keys. We'll discuss mutability further in the future.  -->

<!-- >>> pokemon[('diglett', 'diglett', 'diglett')] = 51
>>> pokemon[25] = 'pikachu'
>>> pokemon
{'mew': 151, 'ditto': 135, 'jolteon': 135, 25: 'pikachu',
'pikachu': 25, ('diglett', 'diglett', 'diglett'): 51,
'dragonair': 148}
>>> pokemon['mewtwo'] = pokemon['mew'] * 2
>>> pokemon
{'mew': 151, 'ditto': 135, 'jolteon': 135, 25: 'pikachu',
'pikachu': 25, ('diglett', 'diglett', 'diglett'): 51,
'mewtwo': 302, 'dragonair': 148
>>> pokemon[['firetype', 'flying']] = 146
Error: unhashable type -->


<h2 id="trees">Trees</h2>


<p>Consult the drop-down if you need a refresher on trees. It's
okay to skip directly to the questions and refer back
here should you get stuck.</p>


        <button id='toggle-3' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Trees<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-3">

<p>A <code>tree</code> is a data structure that represents a hierarchy of information. A file system is a good example of a tree structure. For example, within your <code>cs61a</code> folder, you have folders separating your <code>projects</code>, <code>lab</code> assignments, and <code>homework</code>. The next level is folders that separate different assignments, <code>hw01</code>, <code>lab01</code>, <code>hog</code>, etc., and inside those are the files themselves, including the starter files and <code>ok</code>. Below is an incomplete diagram of what your <code>cs61a</code> directory might look like.</p>

<p><img class="img-responsive center-block" src="assets/cs61a-tree.png" alt="cs61a_tree" width="" height=""></p>

<p>As you can see, unlike trees in nature, the tree abstract data type is drawn with the root at the top and the leaves at the bottom.</p>

</div>
<br>


<h3 id="tree-adt">Tree ADT</h3>


<p>Our <code>tree</code> abstract data type consists of a root and a list of its
<code>branches</code>. To create a tree and access its root value and branches, use the
following interface of constructor and selectors:</p>

<ul>
  <li><p>Constructor</p>

  <ul>
    <li><code>tree(label, branches=[])</code>: creates a tree object with the given <code>label</code>
    value at its root node and list of <code>branches</code>. Notice that the second argument
    to this constructor, <code>branches</code>, is optional — if you want to make a tree with
    no branches, leave this argument empty.</li>
  </ul></li>
  <li><p>Selectors</p>

  <ul>
    <li><code>label(tree)</code>: returns the value in the root node of <code>tree</code>.</li>
    <li><code>branches(tree)</code>: returns the list of branches of the given <code>tree</code> (each of which is also a tree)</li>
  </ul></li>
  <li><p>Convenience function</p>

  <ul>
    <li><code>is_leaf(tree)</code>: returns <code>True</code> if <code>tree</code>'s list of <code>branches</code> is empty, and
    <code>False</code> otherwise.</li>
  </ul></li>
</ul>

<p>For example, the tree generated by</p>

<pre><code>number_tree = tree(1,
         [tree(2),
          tree(3,
               [tree(4),
                tree(5)]),
          tree(6,
               [tree(7)])])</code></pre>

<p>would look like this:</p>

<pre><code>   1
 / | \
2  3  6
  / \  \
 4   5  7</code></pre>

<p>To extract the number <code>3</code> from this tree, which is the label of the root of its second branch, we would do this:</p>

<pre><code>label(branches(number_tree)[1])</code></pre>

<p>The lab file contains the implementation of the tree ADT, if you would like to view it.
However, as with any data abstraction, we should only concern ourselves with what our functions
do rather than their specific implementation! You <em>do not</em> need to look at the implementation of the
tree ADT for this problem, and your solutions should not depend on the specifics
of our implementation beyond what is specified in the interface above.</p>


<h3 id="q2-finding-berries">Q2: Finding Berries!</h3>


<p>The squirrels on campus need your help! There are a lot of trees on campus and
the squirrels would like to know which ones contain berries. Define the function
<code>berry_finder</code>, which takes in a tree and returns <code>True</code> if the tree contains a
node with the value <code>&#x27;berry&#x27;</code> and <code>False</code> otherwise.</p>

<blockquote><p><strong>Hint</strong>:
To iterate through each of the branches of a particular tree,
you can consider using a <code>for</code> loop to get each branch.</p></blockquote>

<solution>

<pre><code class="python">def berry_finder(t):
    &quot;&quot;&quot;Returns True if t contains a node with the value &#x27;berry&#x27; and 
    False otherwise.

    &gt;&gt;&gt; scrat = tree(&#x27;berry&#x27;)
    &gt;&gt;&gt; berry_finder(scrat)
    True
    &gt;&gt;&gt; sproul = tree(&#x27;roots&#x27;, [tree(&#x27;branch1&#x27;, [tree(&#x27;leaf&#x27;), tree(&#x27;berry&#x27;)]), tree(&#x27;branch2&#x27;)])
    &gt;&gt;&gt; berry_finder(sproul)
    True
    &gt;&gt;&gt; numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])
    &gt;&gt;&gt; berry_finder(numbers)
    False
    &gt;&gt;&gt; t = tree(1, [tree(&#x27;berry&#x27;,[tree(&#x27;not berry&#x27;)])])
    &gt;&gt;&gt; berry_finder(t)
    True
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>


</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q berry_finder<button id="copy-code-python3ok-qberry_finder" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qberry_finder").onclick = () => copyCode('python3 ok -q berry_finder', "copy-code-python3ok-qberry_finder");
        </script>
        <br/>


<h3 id="q3-replace-loki-at-leaf">Q3: Replace Loki at Leaf</h3>


<p>Define <code>replace_loki_at_leaf</code>, which takes a tree <code>t</code> and a value <code>lokis_replacement</code>. <code>replace_loki_at_leaf</code> returns a new tree that's the same as <code>t</code> except
that every leaf label equal to <code>&quot;loki&quot;</code> has been replaced with <code>lokis_replacement</code>.</p>

<p>If you want to learn about the Norse mythology referenced in this problem, you can read about it <a href="https://en.wikipedia.org/wiki/Yggdrasil">here</a>.</p>

<solution>

<pre><code class="python">  def replace_loki_at_leaf(t, lokis_replacement):
      &quot;&quot;&quot;Returns a new tree where every leaf value equal to &quot;loki&quot; has
      been replaced with lokis_replacement.

      &gt;&gt;&gt; yggdrasil = tree(&#x27;odin&#x27;,
      ...                  [tree(&#x27;balder&#x27;,
      ...                        [tree(&#x27;loki&#x27;),
      ...                         tree(&#x27;freya&#x27;)]),
      ...                   tree(&#x27;frigg&#x27;,
      ...                        [tree(&#x27;loki&#x27;)]),
      ...                   tree(&#x27;loki&#x27;,
      ...                        [tree(&#x27;sif&#x27;),
      ...                         tree(&#x27;loki&#x27;)]),
      ...                   tree(&#x27;loki&#x27;)])
      &gt;&gt;&gt; laerad = copy_tree(yggdrasil) # copy yggdrasil for testing purposes
      &gt;&gt;&gt; print_tree(replace_loki_at_leaf(yggdrasil, &#x27;freya&#x27;))
      odin
        balder
          freya
          freya
        frigg
          freya
        loki
          sif
          freya
        freya
      &gt;&gt;&gt; laerad == yggdrasil # Make sure original tree is unmodified
      True
      &quot;&quot;&quot;
      "*** YOUR CODE HERE ***"
</code></pre>


</solution>

<!--
<br />

<p>Watch the hints video below for somewhere to start:

            <iframe width="560" height="315" src="https://youtube.com/embed/FUIXaJaReOA"
                frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe><p><a href='https://youtu.be/FUIXaJaReOA'> YouTube link </a></p></p>

<br />
-->

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q replace_loki_at_leaf<button id="copy-code-python3ok-qreplace_loki_at_leaf" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qreplace_loki_at_leaf").onclick = () => copyCode('python3 ok -q replace_loki_at_leaf', "copy-code-python3ok-qreplace_loki_at_leaf");
        </script>
        <br/>

<!--

-->


<h2 id="data-abstraction">Data Abstraction</h2>


<p>Consult the drop-down if you need a refresher on data abstraction. It's
okay to skip directly to the questions and refer back
here should you get stuck.</p>


        <button id='toggle-4' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Data Abstraction<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-4">

<p>So far, we have encountered several data types:
numbers, strings, booleans, lists, tuples, and dictionaries.
But what if we want to represent more complicated things —
such as the objects we encounter in real life?</p>

<p>Enter the idea of <em>data abstraction</em>, which allows us to build
and use objects in code that represent a compound value.</p>

<p>An <em>abstract data type</em> consists of two types of functions:</p>

<ul>
  <li><strong>Constructors</strong>: functions that build instances of the abstract data type.</li>
  <li><strong>Selectors</strong>: functions that retrieve information from instances of the ADT.</li>
</ul>

<p>An integral part of data abstraction is the concept of <em>abstraction</em>.
Users of the abstract data type have access to an <em>interface</em> of defined
actions (i.e. constructors and selectors) they can take with the ADT.
The user of the ADT does <em>not</em> need to know how the constructors and
selectors are implemented. The nature of <em>abstraction</em> allows whoever uses them to
assume that the functions have been written correctly and work as described.</p>

<p>This is called the <strong>abstraction barrier</strong>!</p>

<p>In fact, interacting within an ADT outside of its interface of constructors
and selectors is called "violating the abstraction barrier" and is
strongly discouraged (even when it doesn't produce an error).</p>

<p>In this way, data abstraction mimics how we think about the world.
For example, a car is a complicated machine, but it has a simple interface
by which we interact with it: the wheel, the gas pedal, the gear shift.
If you want to drive a car, you don't need to know how the
engine was built or what kind of material the tires are made of.
It's easy to drive a car because of the suppression of complexity that
abstraction provides us.</p>

<p>For the car, the principle of the abstraction barrier also applies.
If we want to start the car,
we should use the provided interface of turning the ignition key, rather than
getting out, popping the hood, and messing around with the engine.
While you could likely do that if you had enough knowledge, it is
unnecessarily costly and highly dependent on how exactly the car
was constructed. What are you going to do if the car is electric?</p>

<p>When you're writing code using ADTs that have been provided for you,
make sure that you're never assuming
anything about the ADT other than that it can be constructed
with its constructor and its information can be accessed by selectors.
Your code should never depend on the specific implementation of
the ADT under the hood.</p>

</div>


<h3 id="city-adt">City ADT</h3>


<p>Say we have an abstract data type for cities. A city has a name, a latitude
coordinate, and a longitude coordinate.</p>

<p>Our data abstraction has one <strong>constructor</strong>:</p>

<ul>
  <li><code>make_city(name, lat, lon)</code>: Creates a city object with the given name,
  latitude, and longitude.</li>
</ul>

<p>We also have the following <strong>selectors</strong> in order to get the information for
each city:</p>

<ul>
  <li><code>get_name(city)</code>: Returns the city's name</li>
  <li><code>get_lat(city)</code>: Returns the city's latitude</li>
  <li><code>get_lon(city)</code>: Returns the city's longitude</li>
</ul>

<p>Here is how we would use the constructor and selectors to create cities and
extract their information:</p>

<pre><code>&gt;&gt;&gt; berkeley = make_city(&#x27;Berkeley&#x27;, 122, 37)
&gt;&gt;&gt; get_name(berkeley)
&#x27;Berkeley&#x27;
&gt;&gt;&gt; get_lat(berkeley)
122
&gt;&gt;&gt; new_york = make_city(&#x27;New York City&#x27;, 74, 40)
&gt;&gt;&gt; get_lon(new_york)
40</code></pre>

<p>All of the selector and constructor functions can be found in the lab file
if you are curious to see how they are implemented. However, the point of data
abstraction is that — as users of the city ADT — we do not need to know how an
the ADT is implemented. You <em>do not</em> need to look at the implementation of the
city ADT for this problem, and your solutions should not depend on the specifics
of our implementation beyond what is specified in the interface above.</p>


<h3 id="q4-distance">Q4: Distance</h3>


<p>We will now implement the function <code>distance</code>, which computes the
distance between two city objects. Recall that the distance between two
coordinate pairs <code>(x1, y1)</code> and <code>(x2, y2)</code> can be found by calculating
the <code>sqrt</code> of <code>(x1 &#x2d; x2)**2 + (y1 &#x2d; y2)**2</code>. We have already imported
<code>sqrt</code> for your convenience. Use the latitude and longitude of a city as
its coordinates; you'll need to use the selectors to access this info!</p>

<solution>

<pre><code>from math import sqrt
def distance(city_a, city_b):
    &quot;&quot;&quot;
    &gt;&gt;&gt; city_a = make_city(&#x27;city_a&#x27;, 0, 1)
    &gt;&gt;&gt; city_b = make_city(&#x27;city_b&#x27;, 0, 2)
    &gt;&gt;&gt; distance(city_a, city_b)
    1.0
    &gt;&gt;&gt; city_c = make_city(&#x27;city_c&#x27;, 6.5, 12)
    &gt;&gt;&gt; city_d = make_city(&#x27;city_d&#x27;, 2.5, 15)
    &gt;&gt;&gt; distance(city_c, city_d)
    5.0
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q distance<button id="copy-code-python3ok-qdistance" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qdistance").onclick = () => copyCode('python3 ok -q distance', "copy-code-python3ok-qdistance");
        </script>
        <br/>


<h3 id="q5-closer-city">Q5: Closer City</h3>


<p>Next, implement <code>closer_city</code>, a function that takes a latitude,
longitude, and two cities, and returns the <em>name</em> of the city that is
closer to the provided latitude and longitude.</p>

<p>You may only use the selectors and constructors introduced above and the
<code>distance</code> function you just defined for this question.</p>

<blockquote><p><strong>Hint</strong>: How can you use your <code>distance</code> function to find the distance between
the given location and each of the given cities?</p></blockquote>

<solution>

<pre><code>def closer_city(lat, lon, city_a, city_b):
    &quot;&quot;&quot;
    Returns the name of either city_a or city_b, whichever is closest to
    coordinate (lat, lon). If the two cities are the same distance away
    from the coordinate, consider city_b to be the closer city.

    &gt;&gt;&gt; berkeley = make_city(&#x27;Berkeley&#x27;, 37.87, 112.26)
    &gt;&gt;&gt; stanford = make_city(&#x27;Stanford&#x27;, 34.05, 118.25)
    &gt;&gt;&gt; closer_city(38.33, 121.44, berkeley, stanford)
    &#x27;Stanford&#x27;
    &gt;&gt;&gt; bucharest = make_city(&#x27;Bucharest&#x27;, 44.43, 26.10)
    &gt;&gt;&gt; vienna = make_city(&#x27;Vienna&#x27;, 48.20, 16.37)
    &gt;&gt;&gt; closer_city(41.29, 174.78, bucharest, vienna)
    &#x27;Bucharest&#x27;
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q closer_city<button id="copy-code-python3ok-qcloser_city" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qcloser_city").onclick = () => copyCode('python3 ok -q closer_city', "copy-code-python3ok-qcloser_city");
        </script>
        <br/>


<h3 id="q6-don-t-violate-the-abstraction-barrier">Q6: Don't violate the abstraction barrier!</h3>


<blockquote><p>Note:
this question has no code-writing component
(if you implemented the previous two questions correctly).</p></blockquote>

<p>When writing functions that use a data abstraction, we should use the
constructor(s) and selector(s) whenever possible instead of assuming the
data abstraction's implementation.
Relying on a data abstraction's underlying implementation is known as
<em>violating the abstraction barrier</em>, and we never want to do this!</p>

<p>It's possible that you passed the doctests for the previous questions
even if you violated the abstraction barrier. To check whether or not you
did so, run the following command:</p>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q check_city_abstraction<button id="copy-code-python3ok-qcheck_city_abstraction" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qcheck_city_abstraction").onclick = () => copyCode('python3 ok -q check_city_abstraction', "copy-code-python3ok-qcheck_city_abstraction");
        </script>
        <br/>

<p>The <code>check_city_abstraction</code> function exists only for the doctest, which swaps
out the implementations of the original abstraction with something else, runs
the tests from the previous two parts, then restores the original abstraction.</p>

<p>The nature of the abstraction barrier guarantees that changing the
implementation of an data abstraction shouldn't affect the functionality of
any programs that use that data abstraction, as long as the constructors and
selectors were used properly.</p>

<p>If you passed the Ok tests for the previous questions but not this one,
the fix is simple! Just replace any code that violates the abstraction
barrier with the appropriate constructor or selector.</p>

<p>Make sure that your functions pass the tests with both the first and the
second implementations of the data abstraction and that you understand why
they should work for both before moving on.</p>


<h2 id="check-your-score-locally">Check Your Score Locally</h2>

<p>You can locally check your score on each question of this assignment by running</p>

<pre><code>python3 ok &#x2d;&#x2d;score</code></pre>

<p><strong>This does NOT submit the assignment!</strong> When you are satisfied with your score, submit the assignment to Gradescope to receive credit for it.</p>


<h2 id="submit">Submit</h2>

<p>Make sure to submit this assignment by uploading any files you've edited <strong>to the appropriate Gradescope assignment.</strong> For a refresher on how to do this, refer to <a href="https://cs61a.org/lab/lab00/#submit-with-gradescope">Lab 00</a>.</p>


<h1 id="optional-questions">Optional Questions</h1>


<blockquote><p>These questions are optional, but you must complete them in order
to be checked off before the end of the lab period. They are also
useful practice!</p></blockquote>


<h2 id="trees-2">Trees</h2>



<h3 id="q7-recursion-on-trees">Q7: Recursion on Trees</h3>


<p>Define a function <code>dejavu</code>, which takes in a tree of numbers <code>t</code> and a number <code>n</code>. It returns <code>True</code> if there is a path from the root to a leaf such that the sum of the numbers along that path is <code>n</code> and <code>False</code> otherwise.</p>

<solution>

<pre><code>def dejavu(t, n):
    &quot;&quot;&quot;
    &gt;&gt;&gt; my_tree = tree(2, [tree(3, [tree(5), tree(7)]), tree(4)])
    &gt;&gt;&gt; dejavu(my_tree, 12) # 2 &#x2d;&gt; 3 &#x2d;&gt; 7
    True
    &gt;&gt;&gt; dejavu(my_tree, 5) # Sums of partial paths like 2 &#x2d;&gt; 3 don ’t count
    False
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q dejavu<button id="copy-code-python3ok-qdejavu" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qdejavu").onclick = () => copyCode('python3 ok -q dejavu', "copy-code-python3ok-qdejavu");
        </script>
        <br/>


<h3 id="q8-hailstone-tree">Q8: Hailstone Tree</h3>


<p>We can represent the hailstone sequence as a tree in the figure below,
showing the route different numbers take to reach 1. Remember that a hailstone
sequence starts with a number <code>n</code>, continuing to <code>n/2</code> if <code>n</code> is even or <code>3n+1</code>
if <code>n</code> is odd, ending with 1. Write a function <code>hailstone_tree(n, h)</code>
which generates a tree of height <code>h</code>, containing hailstone numbers that
will reach <code>n</code>.</p>

<blockquote><p><strong>Hint:</strong> A node of a hailstone tree will always have at least one, and at most two branches (which are also hailstone trees). Under what conditions do you add the second branch?</p></blockquote>

<solution>

<pre><code>def hailstone_tree(n, h):
    &quot;&quot;&quot;Generates a tree of hailstone numbers that will reach N, with height H.
    &gt;&gt;&gt; print_tree(hailstone_tree(1, 0))
    1
    &gt;&gt;&gt; print_tree(hailstone_tree(1, 4))
    1
      2
        4
          8
            16
    &gt;&gt;&gt; print_tree(hailstone_tree(8, 3))
    8
      16
        32
          64
        5
          10
    &quot;&quot;&quot;
    if _________________________________:
        return _________________________________
    branches = _________________________________
    if ___________ and ___________ and ___________:
        branches += _________________________________
    return tree(n, branches)</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q hailstone_tree<button id="copy-code-python3ok-qhailstone_tree" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qhailstone_tree").onclick = () => copyCode('python3 ok -q hailstone_tree', "copy-code-python3ok-qhailstone_tree");
        </script>
        <br/>
<script>
    $('.alwaystoggle').css('display', 'inline-block');
    $('.alwaystoggle').click(function() {
      var solution_id = $(this).attr('id');
      $('div.' + solution_id).slideToggle(600);
    });
</script>

  </div>

  <div class='col-md-3 sticky'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="#required-questions">Required Questions</a></li>
  <ul>
    <li><a href="#getting-started-videos">Getting Started Videos</a></li>
    <li><a href="#dictionaries">Dictionaries</a></li>
    <ul>
      <li><a href="#q1-dictionaries">Q1: Dictionaries</a></li>
    </ul>
    <li><a href="#trees">Trees</a></li>
    <ul>
      <li><a href="#tree-adt">Tree ADT</a></li>
      <li><a href="#q2-finding-berries">Q2: Finding Berries!</a></li>
      <li><a href="#q3-replace-loki-at-leaf">Q3: Replace Loki at Leaf</a></li>
    </ul>
    <li><a href="#data-abstraction">Data Abstraction</a></li>
    <ul>
      <li><a href="#city-adt">City ADT</a></li>
      <li><a href="#q4-distance">Q4: Distance</a></li>
      <li><a href="#q5-closer-city">Q5: Closer City</a></li>
      <li><a href="#q6-don-t-violate-the-abstraction-barrier">Q6: Don't violate the abstraction barrier!</a></li>
    </ul>
    <li><a href="#check-your-score-locally">Check Your Score Locally</a></li>
    <li><a href="#submit">Submit</a></li>
  </ul>
  <li><a href="#optional-questions">Optional Questions</a></li>
  <ul>
    <li><a href="#trees-2">Trees</a></li>
    <ul>
      <li><a href="#q7-recursion-on-trees">Q7: Recursion on Trees</a></li>
      <li><a href="#q8-hailstone-tree">Q8: Hailstone Tree</a></li>
    </ul>
  </ul>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/weekly">Weekly Schedule</a></li>
            <li><a href="/office-hours">Office Hours</a></li>
            <li><a href="/staff">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="/resources">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/articles/studying">Studying Guide</a></li>
            <li><a href="/articles/debugging">Debugging Guide</a></li>
            <li><a href="/articles/composition">Composition Guide</a></li>
            <li><a href="/articles/pair-programming">Pair Programming</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="/articles/about">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/articles/about#assignments">Assignments</a></li>
            <li><a href="/articles/about#exams">Exams</a></li>
            <li><a href="/articles/about#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/loader.min.js"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/editor/editor.main.min.css">
  <script>
      require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs' }});
      window.MonacoEnvironment = { getWorkerUrl: () => URL.createObjectURL(new Blob([`
      self.MonacoEnvironment = {
          baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min'
      };
      importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/base/worker/workerMain.min.js');
  `], { type: 'text/javascript' }))
  };
  </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsPlumb/2.15.5/js/jsplumb.min.js"></script>
    <script src="/assets/js/network_storage.js"></script>
    <script src="/assets/js/storable.js"></script>
    <script src="/assets/js/editor.js"></script>
    <script src="/assets/js/copy-button.js"></script>
    <script src="/assets/js/env-diagram.js"></script>
    
<script src="/assets/js/sketchy.js"></script>
<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  </body>
</html>