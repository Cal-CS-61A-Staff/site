
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content ="CS 61A: Structure and Interpretation of Computer Programs" />
    <meta name="keywords" content ="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS" />
    <meta name="author" content ="Satish Rao" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/assets/js/hl.js"></script>
    <script src="/assets/js/toggledarkmode.js"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="/assets/js/dark-mode.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/mono-blue.css">
    <link rel="icon" href="/assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="/assets/css/disc.css">


    <title>
Small Discussion 6 | CS 61A Fall 2023
</title>
  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="/assets/images/logo.png"/>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Calendar
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="/weekly">Weekly Schedule</a></li>
                <li><a href="/office-hours">Office Hours</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Links
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://sections.cs61a.org">Sections Tool</a></li>
                <li><a href="https://oh.cs61a.org">Office Hours Queue</a></li>
                <li><a href="https://go.cs61a.org/regrades">Request a Regrade</a></li>
                <li><a href="https://go.cs61a.org/zoom-lecture">Rao Zoom Lecture</a></li>
                <li><a href="https://berkeley.zoom.us/j/98407898918">DeNero Zoom Lecture</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="/instructor">Instructors</a></li>
                <li><a href="/TAs">Rao TAs</a></li>
                <li><a href="/TAs2">DeNero TAs</a></li>
                <li><a href="/tutors">Rao Tutors</a></li>
                <li><a href="/tutors2">DeNero Tutors</a></li>
                <li><a href="/academic-interns">Rao Academic Interns</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://go.cs61a.org/extensions">Request an Extension</a></li>
                <li><a href="https://go.cs61a.org/regrades">Request a Regrade</a></li>
                <li><a href="/articles/accommodations">Book an Accommodations Appointment</a></li>
                <li><a href="/resources/">Topical Resources + Past Exams</a></li>
                <li><a href="https://tutor.cs61a.org/">PythonTutor</a></li>
                <li><a href="https://code.cs61a.org/">Code</a></li>
                <li><a href="https://edstem.org/us/courses/42930/discussion/" target="_blank">Ed</a></li>
                <li><a href="/articles/campus-res/">Department/Campus Resources</a></li>
              </ul>
            </li>
            <li><a href="/articles/about">Syllabus</a></li>
            <li><a href="/denero.html">DeNero</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Rao
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="/">Rao Site</a></li>
                <li><a href="https://go.cs61a.org/zoom-lecture">Rao Zoom Lecture</a></li>
              </ul>
            </li>
            <li><a href="/contact/">Contact</a></li>
            <li>
              <label class="switch">
                <input type="checkbox" id="toggle-mode-cb">
                <span class="slider round"></span>
              </label>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class='row'>
  <div class='col-md-9'>
    <header>
      <h1>
        
DeNero Discussion 6: Iterators, Generators

        
        
        <ul class="inline-block list-inline">
          <li><a href="small06.pdf" class="label label-outline">small06.pdf</a></li>
        </ul>
        
        
      </h1>
    </header>
    

<div class="alert storable-login-status"></div>


    
<h1 id="getting-started">Getting Started</h1>


<p>Someone from your group should join <a href="https://cs61a.org/articles/discord">Discord</a>.</p>

<p><strong>To get help from a TA</strong>, send a message to the <code>discuss&#x2d;queue</code> channel with
the @discuss tag and your discussion group number.</p>

<p>If you have only 1 or 2 people in your group, you can join the other group in
the room with you.</p>

<p>If it's too hot in your room, you're welcome to move outside. If your whole
group hasn't arrived yet, leave a note to let latecomers know where you went.</p>


<h3 id="q1-ice-breaker">Q1: Ice Breaker</h3>


<p>Say your name and share a favorite place on the Berkeley campus or surrounding
city that you've discovered. Try to pick a place that others might not have been
yet. (But if the room you're in now is your favorite place on campus, that's ok
too.)</p>


        <button id='toggle-1' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">
<a href="https://www.campus-maps.com/university-of-california-berkeley/mccone-hall/">McCone Hall</a> has a nice view from the 5th floor balcony.
</div>


<h1 id="generators">Generators</h1>



<h3 id="q2-big-fib">Q2: Big Fib</h3>


<p>This generator function yields all of the Fibonacci numbers.</p>

<pre><code class="python">def gen_fib():
    n, add = 0, 1
    while True:
        yield n
        n, add = n + add, n</code></pre>



<p>As a warm-up, explain the following expression to each other so that everyone
understands how it works. (It creates a list of the first 10 Fibonacci numbers.)</p>

<pre><code class="python">(lambda t: [next(t) for _ in range(10)])(gen_fib())</code></pre>



<p>Then, complete the expression below by writing only names and parentheses in the
blanks so that it evaluates to the smallest Fibonacci number that is larger than
2023.</p>

<p>Talk with each other about what built-in functions might be helpful. Try to
figure out the answer without using Python. Only run the code when your group
agrees that the answer is right. This is not the time for guess-and-check.</p>


            
            <b>Your Answer</b>
            
            <div class="monaco-storable" id="fibonacci-input" style="height:180px;"></div>
            <a href="javascript:void" id="modal-link-fibonacci-input">Run in 61A Code</a>
            <div class="modal fade" id="modal-fibonacci-input" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content" style="padding-bottom: -5px">
                    <iframe
                        id="code-iframe-fibonacci-input"
                        width="100%"
                        height="700px"
                        style="border: none; display:block;"
                    ></iframe>
                    </div>
                </div>
            </div>
            <div class="storable-status"></div>
            <script>
                $(() => activateEditor('def gen_fib():\n    n, add = 0, 1\n    while True:\n        yield n\n        n, add = n + add, n\n\n____lambda n: n &gt; 2023, ____\n\n', "python", "fibonacci-input"));
            </script>
        
            <div class="sol-highlight">
                <b>Solution</b>
                
<pre><code>def gen_fib():
    n, add = 0, 1
    while True:
        yield n
        n, add = n + add, n

next(filter(lambda n: n &gt; 2023, gen_fib()))
</code></pre>

            </div>
        

<p><strong>Discussion Time.</strong> When your group finds a solution, discuss what each
function and each set of parentheses is doing. If you're not sure, ask the
course staff. Then, evaluate the expression and post its value in your group's
Discord <a href="https://support.discord.com/hc/en-us/articles/4412085582359-Text-Channels-Text-Chat-In-Voice-Channels#h_01FMJT412WBX1MR4HDYNR8E95X">channel's text chat</a>.</p>


        <button id='toggle-2' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint 1<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-2">

<p>One solution has the form: <code>next(____(lambda n: n &gt; 2020, ____))</code> where the first
blank uses a built-in function to create an iterator and the second blank creates
an iterator over Fibonacci numbers.</p>

</div>


        <button id='toggle-3' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint 2<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-3">

<p>Surprise! There's no hint here. If you're still stuck, it's time to get help
from a TA by sending a message to the <code>discuss&#x2d;queue</code> channel with the @discuss
tag and your discussion group number.</p>

</div>

<div class="page-break"></div>


<h3 id="q3-something-different">Q3: Something Different</h3>


<p>Implement <code>differences</code>, a generator function that takes <code>t</code>, a non-empty
iterator over numbers. It yields the differences between each pair of adjacent
values from <code>t</code>. If <code>t</code> iterates over a positive finite number of values <code>n</code>,
then <code>differences</code> should yield <code>n&#x2d;1</code> times.</p>


            
            <b>Your Answer</b>
            
            <div class="monaco-storable" id="differences-input" style="height:270px;"></div>
            <a href="javascript:void" id="modal-link-differences-input">Run in 61A Code</a>
            <div class="modal fade" id="modal-differences-input" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content" style="padding-bottom: -5px">
                    <iframe
                        id="code-iframe-differences-input"
                        width="100%"
                        height="700px"
                        style="border: none; display:block;"
                    ></iframe>
                    </div>
                </div>
            </div>
            <div class="storable-status"></div>
            <script>
                $(() => activateEditor('def differences(t):\n    &quot;&quot;&quot;Yield the differences between adjacent values from iterator t.\n\n    &gt;&gt;&gt; list(differences(iter([5, 2, &#x2d;100, 103])))\n    [&#x2d;3, &#x2d;102, 203]\n    &gt;&gt;&gt; next(differences(iter([39, 100])))\n    61\n    &quot;&quot;&quot;\n    "*** YOUR CODE HERE ***"\n\n', "python", "differences-input"));
            </script>
        
            <div class="sol-highlight">
                <b>Solution</b>
                
<pre><code>def differences(t):
    &quot;&quot;&quot;Yield the differences between adjacent values from iterator t.

    &gt;&gt;&gt; list(differences(iter([5, 2, &#x2d;100, 103])))
    [&#x2d;3, &#x2d;102, 203]
    &gt;&gt;&gt; next(differences(iter([39, 100])))
    61
    &quot;&quot;&quot;
    last_x = next(t)
    for x in t:
        yield x &#x2d; last_x
        last_x = x
</code></pre>

            </div>
        


        <button id='toggle-4' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-4">
Add to the following implementation by initializing and updating
<code>previous_x</code> so that it is always bound to the value of <code>t</code> that came before
<code>x</code>.

<pre><code class="python">for x in t:
    yield x &#x2d; previous_x</code></pre>


</div>

<p><strong>Presentation Time.</strong> Work together to explain why <code>differences</code> will always
yield <code>n&#x2d;1</code> times for an iterator <code>t</code> over <code>n</code> values. Pick someone who didn't
present to the course staff last week to present your group's answer, and then
send a message to the discuss-queue channel with the @discuss tag, your
discussion group number, and the message "We beg to differ!" and a member of the
course staff will join your voice channel to hear your description and give
feedback.</p>

<div class="page-break"></div>


<h3 id="q4-partitions">Q4: Partitions</h3>


<p>Tree-recursive generator functions have a similar structure to regular
tree-recursive functions. They are useful for iterating over all possibilities.
Instead of building a list of results and returning it, just <code>yield</code> each
result.</p>

<p>You'll need to identify a <em>recursive decomposition</em>: how to express the answer
in terms of recursive calls that are simpler. Ask yourself what will be yielded
by a recursive call, then how to use those results.</p>

<p><strong>Definition.</strong> For positive integers <code>n</code> and <code>m</code>, a <em>partition</em> of <code>n</code> using
parts up to size <code>m</code> is an addition expression of positive integers up to <code>m</code> in
non-decreasing order that sums to <code>n</code>.</p>

<p>Implement <code>partition_gen</code>, a generator functon that takes positive <code>n</code> and <code>m</code>.
It yields the partitions of <code>n</code> using parts up to size <code>m</code> as strings.</p>

<p><strong>Reminder:</strong> For the <code>partitions</code> function we studied in lecture
(<a href="https://youtu.be/DvgT4dnSMVM">video</a>), the recursive decomposition was to
enumerate all ways of partitioning <code>n</code> using at least one <code>m</code> and then to
enumerate all ways with no <code>m</code> (only <code>m&#x2d;1</code> and lower).</p>


            
            <b>Your Answer</b>
            
            <div class="monaco-storable" id="partition_gen-input" style="height:486px;"></div>
            <a href="javascript:void" id="modal-link-partition_gen-input">Run in 61A Code</a>
            <div class="modal fade" id="modal-partition_gen-input" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content" style="padding-bottom: -5px">
                    <iframe
                        id="code-iframe-partition_gen-input"
                        width="100%"
                        height="700px"
                        style="border: none; display:block;"
                    ></iframe>
                    </div>
                </div>
            </div>
            <div class="storable-status"></div>
            <script>
                $(() => activateEditor('def partition_gen(n, m):\n    &quot;&quot;&quot;Yield the partitions of n using parts up to size m.\n\n    &gt;&gt;&gt; for partition in sorted(partition_gen(6, 4)):\n    ...     print(partition)\n    1 + 1 + 1 + 1 + 1 + 1\n    1 + 1 + 1 + 1 + 2\n    1 + 1 + 1 + 3\n    1 + 1 + 2 + 2\n    1 + 1 + 4\n    1 + 2 + 3\n    2 + 2 + 2\n    2 + 4\n    3 + 3\n    &quot;&quot;&quot;\n    assert n &gt; 0 and m &gt; 0\n    if n == m:\n        yield ____\n    if n &#x2d; m &gt; 0:\n        "*** YOUR CODE HERE ***"\n    if m &gt; 1:\n        "*** YOUR CODE HERE ***"\n\n', "python", "partition_gen-input"));
            </script>
        
            <div class="sol-highlight">
                <b>Solution</b>
                
<pre><code>def partition_gen(n, m):
    &quot;&quot;&quot;Yield the partitions of n using parts up to size m.

    &gt;&gt;&gt; for partition in sorted(partition_gen(6, 4)):
    ...     print(partition)
    1 + 1 + 1 + 1 + 1 + 1
    1 + 1 + 1 + 1 + 2
    1 + 1 + 1 + 3
    1 + 1 + 2 + 2
    1 + 1 + 4
    1 + 2 + 3
    2 + 2 + 2
    2 + 4
    3 + 3
    &quot;&quot;&quot;
    assert n &gt; 0 and m &gt; 0
    if n == m:
        yield str(n)
    if n &#x2d; m &gt; 0:
        for p in partition_gen(n &#x2d; m, m):
            yield p + &#x27; + &#x27; + str(m)
    if m &gt; 1:
        yield from partition_gen(n, m&#x2d;1)
</code></pre>

            </div>
        


        <button id='toggle-5' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint: Base Case<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-5">
Yield a partition with just one element, <code>n</code>. Make sure you return a string.
</div>


        <button id='toggle-6' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint: Recursive Cases<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-6">
The first recursive case uses at least one <code>m</code>, and so you will need to yield a string that starts with <code>p</code> but also includes <code>m</code>. The second recursive case only uses parts up to size <code>m&#x2d;1</code>. (You can implement the second case in one line using <code>yield from</code>.)
</div>

<p><strong>Presentation Time.</strong> If you have time, work together to explain
why this implementation of <code>partition_gen</code> does not include base cases for
<code>n &lt; 0</code>, <code>n == 0</code>, or <code>m == 0</code> even though the original implementation of
<code>partitions</code> from lecture
(<a href="https://youtu.be/DvgT4dnSMVM?si=MEkqzloqIcbD1-09&t=515">video</a>) had all three.
Pick someone who didn't present to the course staff this week or last week to
present your group's answer, and then send a message to the discuss-queue
channel with the @discuss tag, your discussion group number, and the message
"We're positive!" and a member of the course staff will join your voice channel
to hear your description and give feedback.</p>


<h1 id="document-the-occasion">Document the Occasion</h1>


<p>Please all fill out the <a href="https://forms.gle/JBrrvsn7m959Rx9KA">attendance form</a>
(one submission per person per week).</p>

<p>If you finish early, you could all go check out someone's favorite place
together.</p>
<script>
    $('.alwaystoggle').css('display', 'inline-block');
    $('.alwaystoggle').click(function() {
      var solution_id = $(this).attr('id');
      $('div.' + solution_id).slideToggle(600);
    });
</script>

  </div>

  <div class='col-md-3 sticky'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="#getting-started">Getting Started</a></li>
  <ul>
    <li><a href="#q1-ice-breaker">Q1: Ice Breaker</a></li>
  </ul>
  <li><a href="#generators">Generators</a></li>
  <ul>
    <li><a href="#q2-big-fib">Q2: Big Fib</a></li>
    <li><a href="#q3-something-different">Q3: Something Different</a></li>
    <li><a href="#q4-partitions">Q4: Partitions</a></li>
  </ul>
  <li><a href="#document-the-occasion">Document the Occasion</a></li>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/weekly">Weekly Schedule</a></li>
            <li><a href="/office-hours">Office Hours</a></li>
            <li><a href="/staff">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="/resources">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/articles/studying">Studying Guide</a></li>
            <li><a href="/articles/debugging">Debugging Guide</a></li>
            <li><a href="/articles/composition">Composition Guide</a></li>
            <li><a href="/articles/pair-programming">Pair Programming</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="/articles/about">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/articles/about#assignments">Assignments</a></li>
            <li><a href="/articles/about#exams">Exams</a></li>
            <li><a href="/articles/about#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/loader.min.js"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/editor/editor.main.min.css">
  <script>
      require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs' }});
      window.MonacoEnvironment = { getWorkerUrl: () => URL.createObjectURL(new Blob([`
      self.MonacoEnvironment = {
          baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min'
      };
      importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/base/worker/workerMain.min.js');
  `], { type: 'text/javascript' }))
  };
  </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsPlumb/2.15.5/js/jsplumb.min.js"></script>
    <script src="/assets/js/network_storage.js"></script>
    <script src="/assets/js/storable.js"></script>
    <script src="/assets/js/editor.js"></script>
    <script src="/assets/js/copy-button.js"></script>
    <script src="/assets/js/env-diagram.js"></script>
    
<script src="/assets/js/sketchy.js"></script>
<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  </body>
</html>